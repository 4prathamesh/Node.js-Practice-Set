<%- include('../partials/head') %>
</head>
<body class="bg-gray-50 min-h-screen">
    <%- include('../partials/header') %>

    <!-- Main Content -->
    <main class="container mx-auto mt-12">
        <h1 class="text-4xl font-bold text-center text-red-600 mb-10">
            Here are Host Home Listings
        </h1>

        <!-- Home Listing Cards -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 px-4">
            <% if (registeredHome && registeredHome.length > 0) { %>
                <% registeredHome.forEach(home => { %>
                    <div class="bg-white shadow-md rounded-xl p-5 hover:shadow-xl duration-300">
                        <% if (home.photo && home.photo.startsWith('http')) { %>
                            <img src="<%= home.photo %>" alt="<%= home.houseName %>" class="w-full h-48 object-cover rounded-lg mb-4">
                        <% } else { %>
                            <div class="w-full h-48 bg-gray-200 rounded-lg mb-4 flex items-center justify-center">
                                <span class="text-gray-500 text-lg">No Image</span>
                            </div>
                        <% } %>
                        <h2 class="text-xl font-semibold text-gray-800 mb-2">
                            <%= home.houseName %>
                        </h2>
                        <p class="text-gray-600 text-sm mb-1">
                            <span class="font-medium">Location:</span> <%= home.location || 'Not specified' %>
                        </p>
                        <p class="text-gray-600 text-sm mb-1">
                            <span class="font-medium">Price:</span> <%= home.price ? '₹ ' + home.price : 'N/A' %>
                        </p>
                        <p class="text-gray-600 text-sm mb-4">
                            <span class="font-medium">Rating:</span> <%= home.rating || 'N/A' %> ⭐
                        </p>
                        <div class="flex flex-col sm:flex-row justify-center items-center gap-2">
                            <a href="/host/edit-home/<%=home._id%>?editing=true" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200 text-sm font-medium w-sm sm:w-auto text-center">Edit</a>
                            
                            <form action="/host/delete-home/<%=home._id%>" method="POST" class="w-full sm:w-auto">
                                <button class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition duration-200 text-sm font-medium w-sm" type="submit" onclick="return confirm('Are you sure you want to delete this home?')">Delete</button>
                            </form>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="col-span-full text-center py-12">
                    <p class="text-gray-500 text-lg">No homes found. <a href="/host/add-home" class="text-blue-500 hover:underline">Add your first home</a></p>
                </div>
            <% } %>
        </div>
    </main>
</body>

</html>
